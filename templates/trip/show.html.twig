{% extends 'layout.html.twig' %}

{% block title %}Trip{% endblock %}

{% block content %}


<main class="container-fluid pt-5">

<a href="{{ path('app_trip_index') }}">Retourne aux trajets</a>
    <div class="row w-75 mx-auto">
        <h2 class="my-4"> {{ trip.startDate ? trip.startDate|format_date( 'full', locale: 'fr') : '' }} </h2>
        <section class="col-8">
            <div class="d-flex justify-content-between border border-3 border-success rounded m-2 p-2 shadow bg-light-subtle">
                <p><strong> {{ trip.startingPoint }} </strong>{{ trip.startingTime ? trip.startingTime|date('H:i:s') : '' }}<i class="bi bi-dash-lg"></i><strong>{{ trip.destination }}</strong>{{ trip.endingTime ? trip.endingTime|date('H:i:s') : '' }} <br> H</p>
                <p> {{ trip.places }} places restantes </p> 
            </div>

            <div class="border border-3 border-success rounded m-2 p-2 shadow bg-light-subtle">
                <div class="d-flex">
                         <p class="px-2">Photo</p> <p class="px-2"> {{trip.Driver.pseudo}} <br> Note <i class="bi bi-star"></i></p>
                </div>
                <hr>
                <div>
                    <strong><i class=" px-1 bi bi-calendar"></i>
                        Votre réservation sera confirmée lorsque {{trip.Driver.pseudo}} acceptera votre demande <br>
                    </strong>

                    <strong> {{trip.car.model}}  <button class="btn btn-success px-2">{% if trip.car.energy == 'THERMIC' %}<i class="bi bi-car-front"></i> {% else %}
                                <i class="bi bi-leaf"></i>{% endif %}</i></button></strong>
                </div>

                <hr>

                <div>
                    <h4>Preferences du conducteur</h4>
                    <ul>
                        <li>truc</li>
                    </ul>
                </div>

            </div>

               <article class="avis  border border-3 border-success rounded m-2 p-2 shadow bg-light-subtle">
                    <h4> Dernier Avis</h4>
                    <ul>
                        <li>
                            <div>avis 1</div>
                        </li>
                    </ul>
                </article>
        </section>

        <aside class="col-4 ">
            <div class="bg-light-subtle d-flex justify-content-between border border-3 border-success rounded m-2 p-2 shadow">
                 <p>Nombre passager : 1 </p>
                <p>{{trip.price}}<br>Crédit</p>
            </div>

            
            <div class="text-center">
                <button 
                    {% if not app.user %} disabled{% endif %}
                type="button" class=" btn btn-lg btn-success shadow" data-bs-toggle="modal" data-bs-target="#Modalconfirmtrajet">Participer</button>
            </div>
        </aside>
    </div>

    <!-- contenu de la modale -->
     <div class="modal fade" id="Modalconfirmtrajet" tabindex="-1" aria-labelledby="ModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="ModalLabel">Confirmation</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    Souhaitez vous dépenser {{trip.price}} credits pour ce trajet ?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
                   
                    <a href="{{ path('app_trip_join', {id: trip.id}) }}" class="btn btn-success">Poursuivre</a>
                   
                </div>
            </div>
        </div>
    </div>


</main>
    


{% endblock %}
